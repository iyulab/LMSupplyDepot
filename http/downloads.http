# # LMSUpplyDepot
@baseUrl = http://localhost:5181
@apiBase = {{baseUrl}}/api/downloads

# Filer Proxy
# @baseUrl = http://localhost:27010
# @apiBase = {{baseUrl}}/lm/api/downloads

@model = hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S

### Get all active downloads
GET {{apiBase}}

#### 200 OK
[{"modelId":"hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S","status":"Downloading","progress":{"modelId":"hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S","fileName":"Llama-3.2-1B-Instruct-UD-IQ1_S.gguf","bytesDownloaded":35667968,"totalBytes":421617696,"bytesPerSecond":0,"status":"Downloading","startedAt":"2025-06-09T03:33:44.6476859Z","progressPercentage":8.459789126118654},"startedAt":"2025-06-09T03:33:44.6476859Z"}]

### Get detailed download status (new unified endpoint)
GET {{apiBase}}/status?model={{model}}

#### 200 OK, Expected:
{"modelId":"hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S","fileName":"Llama-3.2-1B-Instruct-UD-IQ1_S.gguf","bytesDownloaded":31864755,"totalBytes":421617696,"bytesPerSecond":0,"status":"Downloading","startedAt":"2025-06-09T02:36:31.126598Z","progressPercentage":7.55773661834156}

### Get download status for completed model
GET {{apiBase}}/status?model={{model}}

#### 200 OK, Downloading
{"modelId":"hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S","fileName":"Llama-3.2-1B-Instruct-UD-IQ1_S.gguf","bytesDownloaded":83640320,"totalBytes":421617696,"bytesPerSecond":0,"status":"Downloading","startedAt":"2025-06-09T03:33:44.6476859Z","progressPercentage":19.837952911729776}

#### 200 OK, Paused
{"modelId":"hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S","fileName":"Llama-3.2-1B-Instruct-UD-IQ1_S.gguf","bytesDownloaded":154034063,"totalBytes":421617696,"bytesPerSecond":0,"status":"Paused","startedAt":"2025-06-09T03:33:44.6476859Z","progressPercentage":36.53406023071669}

### Get download status for non-existent model
GET {{apiBase}}/status?model=non-existent-model

#### 200 OK, Expected:
{"modelId":"non-existent-model","fileName":"","bytesDownloaded":0,"bytesPerSecond":0,"status":"Failed","errorMessage":"Model not found in downloads","progressPercentage":0}

### Start downloading a model
POST {{apiBase}}/start
Content-Type: application/json

{
  "model": "{{model}}"
}

#### 200 OK
{"message":"Download started for model hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S","model":"hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S","status":"Started"}

### Pause download
POST {{apiBase}}/pause
Content-Type: application/json

{
  "model": "{{model}}"
}

#### 200 OK
{"success":true,"message":"Download paused for model hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S","status":"Paused","progress":{"modelId":"hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S","fileName":"Llama-3.2-1B-Instruct-UD-IQ1_S.gguf","bytesDownloaded":154025984,"totalBytes":421617696,"bytesPerSecond":0,"status":"Paused","startedAt":"2025-06-09T03:33:44.6476859Z","progressPercentage":36.53214403979856}}

### Resume download
POST {{apiBase}}/resume
Content-Type: application/json

{
  "model": "{{model}}"
}

#### 200 OK
{"success":true,"message":"Download resumed for model hf:unsloth/Llama-3.2-1B-Instruct-GGUF/Llama-3.2-1B-Instruct-UD-IQ1_S","status":"Resumed"}

### Cancel download
POST {{apiBase}}/cancel
Content-Type: application/json

{
  "model": "{{model}}"
}

### Download workflow test
### 1. Start download
POST {{apiBase}}/start
Content-Type: application/json

{
  "model": "hf:microsoft/DialoGPT-small"
}

### 2. Monitor detailed status
GET {{apiBase}}/status?model=hf:microsoft/DialoGPT-small

### 3. Pause download
POST {{apiBase}}/pause
Content-Type: application/json

{
  "model": "hf:microsoft/DialoGPT-small"
}

### 4. Check paused status
GET {{apiBase}}/status?model=hf:microsoft/DialoGPT-small

### 5. Resume download
POST {{apiBase}}/resume
Content-Type: application/json

{
  "model": "hf:microsoft/DialoGPT-small"
}